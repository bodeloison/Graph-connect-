<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <title>Graphique ARENH - papernest</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
      body {
        margin: 0;
        font-family: 'Segoe UI', sans-serif;
        background: linear-gradient(135deg, #fdfbff, #f4f8ff);
        color: #1c1c1c;
        padding: 40px 20px;
      }

      .container {
        max-width: 900px;
        margin: auto;
        background: white;
        border-radius: 24px;
        box-shadow: 0 12px 32px rgba(90, 82, 255, 0.15);
        padding: 40px 30px;
        transition: all 0.3s ease;
      }

      .container:hover {
        transform: scale(1.01);
        box-shadow: 0 16px 40px rgba(90, 82, 255, 0.25);
      }

      h1 {
        text-align: center;
        font-size: 28px;
        color: #5a52ff;
        margin-bottom: 30px;
      }

      canvas {
        width: 100% !important;
        height: auto !important;
      }

      .legend {
        text-align: center;
        font-size: 14px;
        color: #666;
        margin-top: 16px;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>ðŸ“ˆ Ã‰volution des valeurs ARENH</h1>
      <canvas id="myChart"></canvas>
      <div class="legend">Comparaison entre wARENH (#5a52ff) et woARENH (#0fc4b2)</div>
    </div>

    <script>
      const csvUrl =
        "https://docs.google.com/spreadsheets/d/e/2PACX-1vQx6EhytRbWApgeu6Xzrx9rB-ljbk5rmDNb1zTpNA04gPbw5_1J5nsU4iLDymQ0ymGWgc4iPELmseN4/pub?gid=1717395148&single=true&output=csv";

      async function fetchCSV() {
        const response = await fetch(csvUrl);
        const text = await response.text();
        const rows = text.trim().split("\n").slice(1);

        const labels = [];
        const wARENH = [];
        const woARENH = [];

        for (let row of rows) {
          const [date, val1, val2] = row.split(",");
          labels.push(date);
          wARENH.push(parseFloat(val1));
          woARENH.push(parseFloat(val2));
        }

        const ctx = document.getElementById("myChart").getContext("2d");
        new Chart(ctx, {
          type: "line",
          data: {
            labels: labels,
            datasets: [
              {
                label: "wARENH",
                data: wARENH,
                borderColor: "#5a52ff",
                backgroundColor: "rgba(90, 82, 255, 0.2)",
                tension: 0.4,
                fill: true
              },
              {
                label: "woARENH",
                data: woARENH,
                borderColor: "#0fc4b2",
                backgroundColor: "rgba(15, 196, 178, 0.2)",
                tension: 0.4,
                fill: true
              }
            ]
          },
          options: {
            responsive: true,
            plugins: {
              legend: {
                position: "bottom"
              },
              title: {
                display: false
              }
            },
            scales: {
              y: {
                beginAtZero: false,
                ticks: {
                  callback: function(value) {
                    return value + " â‚¬";
                  }
                }
              }
            }
          }
        });
      }

      fetchCSV();
    </script>
  </body>
</html>
